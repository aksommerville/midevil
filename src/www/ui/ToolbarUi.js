/* ToolbarUi.js
 * Top of the page, always present.
 */
 
import { Dom } from "../util/Dom.js";
import { Operations } from "../midi/Operations.js";
import { MidiBus } from "../midi/MidiBus.js";
import { VisibilityUi } from "./VisibilityUi.js";

class OpenFileEvent extends Event {
  constructor(name, content) {
    super("mid.openFile");
    this.name = name;
    this.content = content;
  }
}

class OperationEvent extends Event {
  constructor(name) {
    super("mid.operation");
    this.name = name;
  }
}

class ViewScaleEvent extends Event {
  constructor(x, y) {
    super("mid.viewScale");
    this.x = x;
    this.y = y;
  }
}

class OutputSelectionEvent extends Event {
  constructor(name) {
    super("mid.outputSelection");
    this.name = name;
  }
}

export class ToolbarUi extends EventTarget {
  static getDependencies() {
    return [HTMLElement, Dom, Window, Operations, MidiBus];
  }
  constructor(element, dom, window, operations, midiBus) {
    super();
    this.element = element;
    this.dom = dom;
    this.window = window;
    this.operations = operations;
    this.midiBus = midiBus;
    
    this.fileName = "";
    this.encodeFile = null; // () => ArrayBuffer
    this.visibilityUi = null;
    
    this.buildUi();
    
    this.midiOutputsListener = () => this.populateOutputMenu();
    this.midiBus.addEventListener("mid.outputDevicesChanged", this.midiOutputsListener);
  }
  
  onRemoveFromDom() {
    if (this.midiOutputsListener) {
      this.midiBus.removeEventListener("mid.outputDevicesChanged", this.midiOutputsListener);
      this.midiOutputsListener = null;
    }
  }
  
  fileDirty(encodeFile) {
    if (this.encodeFile = encodeFile) {
      this.element.querySelector("input.save").disabled = false;
    } else {
      this.element.querySelector("input.save").disabled = true;
    }
  }
  
  setMouseTattle(message) {
    this.element.querySelector(".mouseTattle").innerText = message;
  }
  
  buildUi() {
    this.element.innerHTML = "";
    
    const file = this.dom.spawn(this.element, "INPUT", {
      type: "file",
      accept: ".mid,audio/midi",
      "on-change": (event) => this.onOpenFile(file.files[0]),
    });
    
    this.dom.spawn(this.element, "INPUT", ["save"], {
      type: "button",
      value: "Save",
      disabled: "disabled",
      "on-click": () => this.onSaveFile(),
    });
    
    this.dom.spawn(this.element, "INPUT", {
      type: "button",
      value: "Demo",
      "on-click": () => this.dispatchEvent(new OpenFileEvent("defend-the-galaxy.mid", XXX_TEMP_DEMO_SONG)),
    });
    
    const opsMenu = this.dom.spawn(this.element, "SELECT", ["ops"], { "on-change": () => this.onOpsChange() });
    this.dom.spawn(opsMenu, "OPTION", "Operations...", { value: "", disabled: "disabled", selected: "selected" });
    for (const { label, name } of this.operations.listOperationsForDisplay()) {
      this.dom.spawn(opsMenu, "OPTION", label, { value: name });
    }
    
    this.dom.spawn(this.element, "INPUT", {
      type: "range",
      name: "horzScale",
      min: 0,
      max: 1000,
      value: 500,
      "on-input": () => this.onScaleInput(),
    });
    this.dom.spawn(this.element, "INPUT", {
      type: "range",
      name: "vertScale",
      min: 0,
      max: 1000,
      value: 500,
      "on-input": () => this.onScaleInput(),
    });
    
    const outputMenu = this.dom.spawn(this.element, "SELECT", ["output"], { "on-change": () => this.onOutputChange() });
    this.populateOutputMenu();
    
    this.visibilityUi = this.dom.spawnController(this.element, VisibilityUi);
    
    this.dom.spawn(this.element, "DIV", ["mouseTattle"]);
  }
  
  populateOutputMenu(devices) {
    const menu = this.element.querySelector("select.output");
    menu.innerHTML = "";
    this.dom.spawn(menu, "OPTION", "No Output", { value: "" });
    for (const device of this.midiBus.getOutputDevices()) {
      this.dom.spawn(menu, "OPTION", device.name, { value: device.id });
    }
  }
  
  onOpenFile(file) {
    if (!file) return;
    file.stream().getReader().read().then(content => {
      this.fileName = file.name;
      this.dispatchEvent(new OpenFileEvent(file.name, content.value.buffer));
    }).catch(e => console.error(e));
  }
  
  onSaveFile() {
    if (!this.encodeFile) return;
    const serial = this.encodeFile();
    if (!serial) return;
    const blob = new Blob([serial], { type: "audio/midi" });
    const url = this.window.URL.createObjectURL(blob);
    const a = this.window.document.createElement("A");
    a.href = url;
    a.download = this.fileName || "download";
    a.click();
  }
  
  onOpsChange() {
    const menu = this.element.querySelector(".ops");
    const selection = menu.value;
    menu.value = "";
    if (selection) {
      this.dispatchEvent(new OperationEvent(selection));
    }
  }
  
  onScaleInput() {
    const horzScale = this.element.querySelector("input[name='horzScale']")?.value;
    const vertScale = this.element.querySelector("input[name='vertScale']")?.value;
    this.dispatchEvent(new ViewScaleEvent(horzScale, vertScale));
  }
  
  onOutputChange() {
    const menu = this.element.querySelector(".output");
    const selection = menu.value;
    this.dispatchEvent(new OutputSelectionEvent(selection));
  }
}

const XXX_TEMP_DEMO_SONG = new Uint8Array([
0x4d,0x54,0x68,0x64,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x01,0x01,0xe0,0x4d,0x54,
0x72,0x6b,0x00,0x00,0x08,0xea,0x8b,0x20,0xff,0x20,0x01,0x00,0x00,0xff,0x03,0x14,
0x53,0x74,0x65,0x69,0x6e,0x77,0x61,0x79,0x20,0x47,0x72,0x61,0x6e,0x64,0x20,0x50,
0x69,0x61,0x6e,0x6f,0x00,0xff,0x04,0x14,0x53,0x74,0x65,0x69,0x6e,0x77,0x61,0x79,
0x20,0x47,0x72,0x61,0x6e,0x64,0x20,0x50,0x69,0x61,0x6e,0x6f,0x00,0xff,0x59,0x02,
0x00,0x00,0x00,0xff,0x58,0x04,0x06,0x03,0x18,0x08,0x00,0xff,0x54,0x05,0x21,0x00,
0x00,0x00,0x00,0x00,0xff,0x51,0x03,0x06,0x5b,0x9b,0x00,0x90,0x32,0x42,0x00,0x3e,
0x49,0x00,0x45,0x49,0x7f,0x80,0x32,0x50,0x20,0x80,0x3e,0x4d,0x0c,0x80,0x45,0x50,
0x82,0x35,0x90,0x32,0x45,0x43,0x80,0x32,0x1d,0x81,0x2d,0x90,0x32,0x4b,0x00,0x3e,
0x51,0x00,0x45,0x55,0x3e,0x80,0x32,0x1f,0x38,0x80,0x3e,0x34,0x06,0x80,0x45,0x2c,
0x74,0x90,0x32,0x3d,0x3c,0x80,0x32,0x2f,0x81,0x34,0x90,0x32,0x41,0x3c,0x80,0x32,
0x2a,0x81,0x34,0x90,0x32,0x4a,0x00,0x3e,0x53,0x00,0x45,0x56,0x7f,0x80,0x32,0x4d,
0x82,0x61,0x90,0x32,0x41,0x3a,0x80,0x32,0x7f,0x81,0x36,0x90,0x32,0x3d,0x3f,0x80,
0x32,0x2b,0x81,0x31,0x90,0x32,0x3a,0x3a,0x80,0x32,0x38,0x81,0x0b,0x80,0x3e,0x3c,
0x04,0x80,0x45,0x40,0x27,0x90,0x32,0x39,0x43,0x80,0x32,0x24,0x81,0x2d,0x90,0x32,
0x4a,0x00,0x3e,0x4b,0x00,0x45,0x51,0x81,0x06,0x80,0x32,0x55,0x30,0x80,0x3e,0x44,
0x1a,0x80,0x45,0x4f,0x82,0x10,0x90,0x32,0x44,0x4c,0x80,0x32,0x14,0x81,0x23,0xd0,
0x0e,0x01,0x90,0x32,0x48,0x00,0x3e,0x4f,0x00,0x45,0x4e,0x5c,0x80,0x32,0x0b,0x09,
0xd0,0x00,0x81,0x0b,0x90,0x32,0x36,0x3c,0x80,0x32,0x36,0x04,0x80,0x45,0x42,0x00,
0x3e,0x1f,0x81,0x30,0x90,0x32,0x4a,0x81,0x2d,0x80,0x32,0x24,0x43,0x90,0x39,0x49,
0x00,0x41,0x55,0x00,0x48,0x4c,0x81,0x60,0x80,0x39,0x49,0x10,0x90,0x37,0x4a,0x81,
0x70,0x90,0x35,0x44,0x03,0x80,0x37,0x58,0x42,0x80,0x35,0x1d,0x81,0x2b,0x90,0x37,
0x52,0x81,0x01,0x80,0x37,0x56,0x6f,0x90,0x35,0x47,0x81,0x2a,0x80,0x35,0x0b,0x46,
0x90,0x30,0x4a,0x81,0x34,0x80,0x41,0x49,0x0e,0x80,0x48,0x2e,0x2e,0x90,0x32,0x4a,
0x00,0x3e,0x50,0x00,0x45,0x41,0x3c,0x80,0x30,0x49,0x63,0x80,0x32,0x4d,0x81,0x0b,
0x80,0x3e,0x34,0x2b,0x80,0x45,0x43,0x81,0x0b,0x90,0x32,0x3e,0x39,0x80,0x32,0x31,
0x81,0x37,0x90,0x32,0x47,0x00,0x3e,0x50,0x00,0x45,0x50,0x45,0x80,0x32,0x1a,0x81,
0x2b,0x90,0x32,0x3b,0x3c,0x80,0x32,0x34,0x81,0x11,0x80,0x3e,0x2f,0x0e,0x80,0x45,
0x3c,0x15,0x90,0x32,0x3f,0x3c,0x80,0x32,0x7f,0x81,0x36,0x90,0x32,0x50,0x00,0x3e,
0x4e,0x00,0x45,0x4f,0x7b,0x80,0x32,0x3c,0x82,0x61,0x90,0x32,0x41,0x43,0x80,0x32,
0x20,0x81,0x2d,0x90,0x32,0x3d,0x43,0x80,0x32,0x21,0x81,0x2d,0x90,0x32,0x3e,0x3c,
0x80,0x32,0x2e,0x2a,0x80,0x45,0x23,0x49,0x80,0x3e,0x30,0x43,0x90,0x32,0x39,0x81,
0x36,0x80,0x32,0x4d,0x3a,0x90,0x34,0x4d,0x00,0x3c,0x44,0x00,0x43,0x4d,0x81,0x19,
0x80,0x34,0x1d,0x57,0x90,0x39,0x46,0x81,0x3b,0x80,0x39,0x44,0x35,0x90,0x34,0x49,
0x7a,0x80,0x34,0x40,0x76,0x90,0x39,0x44,0x81,0x4b,0x80,0x39,0x38,0x25,0x90,0x34,
0x4b,0x81,0x2b,0x80,0x34,0x44,0x45,0x90,0x39,0x40,0x81,0x57,0x80,0x43,0x55,0x10,
0x80,0x3c,0x50,0x09,0x90,0x2d,0x43,0x00,0x40,0x4e,0x00,0x45,0x4e,0x39,0xd0,0x14,
0x33,0x80,0x39,0x4c,0x00,0xd0,0x31,0x32,0xd0,0x29,0x33,0xd0,0x00,0x16,0x80,0x2d,
0x1e,0x09,0x90,0x39,0x51,0x81,0x4d,0x80,0x39,0x46,0x23,0x90,0x2d,0x4e,0x81,0x06,
0x80,0x2d,0x31,0x6a,0x90,0x39,0x3b,0x81,0x5b,0x80,0x39,0x3b,0x15,0x90,0x2d,0x49,
0x81,0x27,0x80,0x45,0x4c,0x12,0x80,0x40,0x46,0x37,0x90,0x39,0x45,0x0e,0x80,0x2d,
0x4b,0x81,0x62,0x90,0x32,0x40,0x00,0x3e,0x4d,0x00,0x45,0x51,0x09,0x80,0x39,0x47,
0x81,0x04,0x80,0x32,0x3f,0x25,0x80,0x45,0x36,0x04,0x80,0x3e,0x25,0x82,0x2a,0x90,
0x32,0x48,0x3c,0x80,0x32,0x23,0x81,0x34,0x90,0x32,0x4b,0x00,0x3e,0x4e,0x00,0x45,
0x4e,0x58,0x80,0x32,0x0b,0x75,0x80,0x45,0x47,0x0a,0x80,0x3e,0x2d,0x19,0x90,0x32,
0x3a,0x3f,0x80,0x32,0x31,0x81,0x31,0x90,0x32,0x3c,0x37,0x80,0x32,0x7f,0x81,0x39,
0x90,0x32,0x4a,0x00,0x3e,0x4a,0x00,0x45,0x4e,0x81,0x3d,0x80,0x32,0x4d,0x82,0x23,
0x90,0x32,0x43,0x3a,0x80,0x32,0x2b,0x81,0x36,0x90,0x32,0x42,0x3c,0x80,0x32,0x2c,
0x81,0x34,0x90,0x32,0x40,0x38,0x80,0x32,0x7f,0x81,0x01,0x80,0x45,0x3c,0x0b,0x80,
0x3e,0x3c,0x2c,0x90,0x32,0x3e,0x3e,0x80,0x32,0x2a,0x81,0x32,0x90,0x32,0x4d,0x00,
0x3e,0x4c,0x00,0x45,0x53,0x81,0x14,0x80,0x32,0x2b,0x1b,0x80,0x3e,0x4f,0x17,0x80,
0x45,0x55,0x82,0x1a,0x90,0x32,0x43,0x43,0x80,0x32,0x1f,0x81,0x2d,0x90,0x32,0x43,
0x00,0x3e,0x4a,0x00,0x45,0x4c,0x4a,0x80,0x32,0x15,0x5c,0x80,0x45,0x31,0x10,0x80,
0x3e,0x3e,0x3a,0x90,0x32,0x47,0x3a,0x80,0x32,0x2b,0x81,0x36,0x90,0x32,0x45,0x81,
0x02,0x80,0x32,0x01,0x6e,0x90,0x39,0x45,0x00,0x41,0x4e,0x00,0x48,0x4d,0x81,0x64,
0x80,0x39,0x32,0x0c,0x90,0x37,0x49,0x81,0x2f,0x80,0x37,0x44,0x41,0x90,0x35,0x4c,
0x3a,0x80,0x35,0x2d,0x81,0x36,0x90,0x37,0x50,0x73,0x80,0x37,0x04,0x7d,0x90,0x35,
0x3c,0x81,0x49,0x80,0x35,0x48,0x27,0x90,0x30,0x3d,0x81,0x70,0x90,0x32,0x4c,0x00,
0x3e,0x51,0x00,0x45,0x4b,0x03,0xd0,0x0e,0x22,0x80,0x41,0x4b,0x11,0xd0,0x0c,0x01,
0x80,0x30,0x47,0x03,0x80,0x48,0x40,0x2e,0xd0,0x00,0x1e,0x80,0x3e,0x2c,0x10,0x80,
0x32,0x3a,0x31,0x80,0x45,0x43,0x82,0x19,0x90,0x32,0x43,0x45,0x80,0x32,0x1a,0x81,
0x2b,0x90,0x32,0x41,0x00,0x3e,0x52,0x00,0x45,0x52,0x56,0x80,0x32,0x0e,0x29,0x80,
0x3e,0x2c,0x15,0x80,0x45,0x28,0x5c,0x90,0x32,0x3f,0x43,0x80,0x32,0x23,0x81,0x2d,
0x90,0x32,0x3f,0x3c,0x80,0x32,0x31,0x81,0x34,0x90,0x32,0x4c,0x00,0x3e,0x53,0x00,
0x45,0x52,0x81,0x0f,0x80,0x32,0x36,0x82,0x51,0x90,0x32,0x42,0x43,0x80,0x32,0x1b,
0x81,0x2d,0x90,0x32,0x44,0x43,0x80,0x32,0x1e,0x81,0x2d,0x90,0x32,0x3d,0x40,0x80,
0x32,0x26,0x40,0x80,0x3e,0x43,0x53,0x80,0x45,0x46,0x1d,0x90,0x32,0x3e,0x6c,0x80,
0x32,0x06,0x5d,0xd0,0x0e,0x27,0x90,0x34,0x4c,0x00,0x3c,0x47,0x00,0x43,0x4d,0x3f,
0xd0,0x00,0x81,0x0a,0x80,0x34,0x32,0x27,0x90,0x39,0x36,0x81,0x56,0x80,0x39,0x49,
0x1a,0x90,0x34,0x45,0x81,0x14,0x80,0x34,0x53,0x5c,0x90,0x39,0x47,0x81,0x44,0x80,
0x39,0x31,0x2c,0x90,0x34,0x45,0x81,0x62,0x80,0x34,0x01,0x0e,0x90,0x39,0x41,0x1e,
0x80,0x43,0x42,0x2c,0x80,0x3c,0x44,0x81,0x26,0x90,0x2d,0x4d,0x00,0x40,0x4d,0x00,
0x45,0x56,0x43,0x80,0x39,0x48,0x81,0x11,0x80,0x2d,0x48,0x1c,0x90,0x39,0x4a,0x81,
0x47,0x80,0x39,0x48,0x29,0x90,0x2d,0x48,0x81,0x0f,0x80,0x2d,0x32,0x61,0x90,0x39,
0x4a,0x81,0x1d,0x80,0x39,0x26,0x53,0x90,0x2d,0x49,0x81,0x27,0x80,0x2d,0x1a,0x49,
0x90,0x39,0x44,0x05,0x80,0x40,0x4b,0x03,0x80,0x45,0x50,0x81,0x3c,0x80,0x39,0x53,
0x0e,0xd0,0x0a,0x1e,0x90,0x33,0x4c,0x00,0x46,0x4a,0x15,0xd0,0x08,0x32,0xd0,0x00,
0x6f,0x80,0x33,0x3a,0x35,0x80,0x46,0x37,0x81,0x75,0x90,0x33,0x35,0x00,0x3f,0x36,
0x81,0x1f,0x80,0x33,0x3e,0x51,0x90,0x3a,0x49,0x5c,0x80,0x3f,0x33,0x66,0x80,0x3a,
0x35,0x2e,0x90,0x33,0x44,0x00,0x46,0x33,0x81,0x06,0x80,0x46,0x12,0x3c,0x80,0x33,
0x30,0x2e,0x90,0x3a,0x42,0x00,0x3f,0x40,0x81,0x16,0x80,0x3f,0x34,0x2c,0x80,0x3a,
0x1c,0x2e,0x90,0x33,0x41,0x00,0x46,0x51,0x81,0x4b,0x80,0x46,0x3d,0x09,0x80,0x33,
0x40,0x82,0x0c,0x90,0x33,0x2f,0x00,0x3f,0x3d,0x81,0x0d,0x80,0x3f,0x3d,0x47,0x80,
0x33,0x2f,0x1c,0x90,0x3a,0x42,0x81,0x21,0x80,0x3a,0x43,0x4f,0x90,0x33,0x3f,0x00,
0x46,0x43,0x35,0xd0,0x0e,0x33,0xd0,0x0c,0x33,0xd0,0x00,0x2e,0x80,0x46,0x3b,0x27,
0x90,0x3a,0x44,0x00,0x3f,0x4c,0x09,0x80,0x33,0x3a,0x81,0x14,0x80,0x3a,0x37,0x27,
0x80,0x3f,0x29,0x2c,0x90,0x31,0x3e,0x00,0x47,0x4c,0x81,0x34,0x80,0x31,0x2d,0x10,
0x80,0x47,0x40,0x82,0x1c,0x90,0x31,0x4c,0x00,0x41,0x4c,0x81,0x34,0x80,0x31,0x40,
0x10,0x80,0x41,0x40,0x2c,0x90,0x38,0x34,0x81,0x69,0x80,0x38,0x33,0x07,0x90,0x31,
0x3c,0x00,0x47,0x52,0x81,0x3b,0x80,0x31,0x29,0x30,0x80,0x47,0x3b,0x05,0x90,0x38,
0x36,0x00,0x41,0x4d,0x74,0x80,0x41,0x4e,0x19,0x80,0x38,0x30,0x63,0x90,0x2e,0x4c,
0x00,0x45,0x4d,0x81,0x34,0x80,0x2e,0x36,0x82,0x2c,0x90,0x2e,0x24,0x81,0x31,0x80,
0x45,0x40,0x3f,0x90,0x35,0x3d,0x00,0x46,0x4d,0x1b,0x80,0x2e,0x2c,0x81,0x10,0x80,
0x35,0x22,0x45,0x90,0x2e,0x48,0x81,0x32,0x80,0x46,0x40,0x04,0x80,0x2e,0x21,0x3a,
0x90,0x35,0x39,0x00,0x41,0x42,0x81,0x4f,0x80,0x35,0x23,0x05,0x80,0x41,0x5d,0x1c,
0x90,0x33,0x3e,0x00,0x46,0x45,0x81,0x74,0x80,0x46,0x17,0x03,0x80,0x33,0x27,0x81,
0x69,0x90,0x33,0x3d,0x00,0x3f,0x3b,0x81,0x70,0x90,0x3a,0x3c,0x15,0x80,0x3f,0x32,
0x08,0x80,0x33,0x37,0x81,0x33,0x80,0x3a,0x32,0x20,0x90,0x33,0x3b,0x00,0x46,0x3b,
0x81,0x3b,0x80,0x33,0x28,0x35,0x90,0x3a,0x37,0x00,0x3f,0x3b,0x15,0x80,0x46,0x40,
0x81,0x50,0x80,0x3a,0x10,0x0b,0x90,0x33,0x47,0x00,0x46,0x49,0x15,0x80,0x3f,0x40,
0x81,0x11,0x80,0x46,0x3b,0x13,0x80,0x33,0x36,0x82,0x27,0x90,0x33,0x39,0x00,0x3f,
0x4a,0x81,0x40,0x80,0x3f,0x4f,0x30,0x90,0x3a,0x46,0x19,0x80,0x33,0x31,0x81,0x54,
0x80,0x3a,0x0b,0x03,0x90,0x33,0x3a,0x00,0x46,0x34,0x81,0x3b,0x80,0x33,0x07,0x19,
0x80,0x46,0x3b,0x1c,0x90,0x3a,0x39,0x00,0x3f,0x4a,0x81,0x40,0x80,0x3f,0x40,0x30,
0x80,0x3a,0x19,0x00,0x90,0x31,0x3e,0x00,0x47,0x4b,0x81,0x57,0x80,0x47,0x55,0x0d,
0x80,0x31,0x33,0x81,0x7c,0x90,0x31,0x43,0x00,0x41,0x3d,0x81,0x18,0x80,0x41,0x49,
0x58,0x90,0x38,0x43,0x19,0x80,0x31,0x22,0x81,0x29,0x80,0x38,0x11,0x2e,0x90,0x31,
0x40,0x81,0x70,0x80,0x31,0x27,0x00,0x90,0x38,0x34,0x81,0x41,0x80,0x38,0x29,0x2f,
0x90,0x2e,0x41,0x00,0x46,0x4e,0x81,0x42,0x80,0x2e,0x37,0x82,0x1e,0x90,0x2e,0x3c,
0x81,0x70,0x90,0x35,0x48,0x2e,0x80,0x2e,0x35,0x7a,0xd0,0x10,0x2c,0x80,0x35,0x39,
0x06,0xd0,0x0e,0x16,0x90,0x2e,0x40,0x1d,0xd0,0x00,0x81,0x53,0x90,0x35,0x3e,0x04,
0x80,0x2e,0x01,0x16,0x80,0x46,0x34,0x81,0x48,0x80,0x35,0x46,0x0e,0x90,0x33,0x3b,
0x00,0x46,0x4a,0x81,0x42,0x80,0x46,0x35,0x05,0x80,0x33,0x3f,0x82,0x19,0x90,0x33,
0x3f,0x00,0x3f,0x3f,0x81,0x56,0x80,0x33,0x22,0x11,0x80,0x3f,0x2f,0x09,0x90,0x3a,
0x4d,0x81,0x0f,0x80,0x3a,0x2f,0x61,0x90,0x33,0x31,0x00,0x46,0x4f,0x81,0x46,0x80,
0x33,0x1d,0x2a,0x90,0x3a,0x2f,0x00,0x47,0x3d,0x0c,0x80,0x46,0x32,0x81,0x48,0x80,
0x3a,0x32,0x07,0x80,0x47,0x55,0x15,0x90,0x33,0x50,0x00,0x46,0x35,0x56,0xd0,0x0e,
0x50,0x80,0x33,0x39,0x15,0xd0,0x00,0x15,0x80,0x46,0x2d,0x82,0x10,0x90,0x33,0x44,
0x00,0x3f,0x40,0x81,0x60,0x80,0x33,0x31,0x10,0x90,0x3a,0x44,0x81,0x16,0x80,0x3a,
0x1d,0x55,0x80,0x3f,0x3f,0x05,0x90,0x33,0x3a,0x00,0x46,0x48,0x81,0x1f,0x80,0x46,
0x25,0x1a,0x80,0x33,0x32,0x37,0x90,0x3a,0x47,0x00,0x47,0x3d,0x7b,0x80,0x3a,0x2c,
0x44,0x80,0x47,0x56,0x31,0x90,0x31,0x4c,0x00,0x46,0x4c,0x81,0x7b,0x80,0x31,0x40,
0x37,0x80,0x46,0x10,0x81,0x2e,0x90,0x31,0x49,0x00,0x3f,0x4b,0x81,0x3e,0x80,0x31,
0x31,0x1f,0x80,0x3f,0x18,0x13,0x90,0x38,0x40,0x81,0x24,0x80,0x38,0x1c,0x4c,0x90,
0x31,0x3d,0x00,0x46,0x48,0x81,0x66,0x80,0x31,0x38,0x06,0x80,0x46,0x3b,0x04,0x90,
0x38,0x46,0x00,0x47,0x43,0x81,0x62,0x80,0x38,0x16,0x0e,0x90,0x31,0x52,0x00,0x46,
0x53,0x40,0x80,0x47,0x3e,0x81,0x26,0x80,0x31,0x3a,0x5f,0x80,0x46,0x3f,0x81,0x1b,
0x90,0x31,0x3c,0x00,0x3f,0x4a,0x81,0x39,0x80,0x31,0x79,0x37,0x90,0x38,0x40,0x4e,
0x80,0x3f,0x1f,0x81,0x16,0x80,0x38,0x1b,0x0c,0x90,0x31,0x45,0x00,0x46,0x4b,0x81,
0x46,0x80,0x46,0x3c,0x2a,0x90,0x38,0x3a,0x00,0x47,0x4d,0x09,0x80,0x31,0x01,0x81,
0x24,0x80,0x38,0x3a,0x43,0x90,0x2f,0x51,0x00,0x46,0x50,0x27,0x80,0x47,0x4b,0x81,
0x45,0x80,0x2f,0x40,0x7a,0x80,0x46,0x31,0x7a,0x90,0x2f,0x40,0x00,0x3f,0x44,0x81,
0x1d,0x80,0x2f,0x3b,0x53,0x90,0x36,0x48,0x68,0x80,0x36,0x5b,0x50,0x80,0x3f,0x28,
0x38,0x90,0x2f,0x4a,0x00,0x46,0x3b,0x81,0x5b,0x80,0x46,0x35,0x0d,0x80,0x2f,0x35,
0x08,0x90,0x36,0x3e,0x00,0x47,0x42,0x81,0x0f,0x80,0x36,0x4b,0x22,0x80,0x47,0x50,
0x3f,0x90,0x2f,0x39,0x00,0x46,0x4e,0x81,0x7b,0x80,0x2f,0x4e,0x81,0x5e,0x80,0x46,
0x34,0x07,0x90,0x2f,0x49,0x00,0x3f,0x44,0x81,0x4d,0x80,0x2f,0x40,0x23,0x90,0x36,
0x3a,0x81,0x0d,0x80,0x36,0x21,0x63,0x90,0x2f,0x3e,0x81,0x47,0x80,0x2f,0x3b,0x29,
0x90,0x36,0x39,0x81,0x3c,0x80,0x3f,0x32,0x24,0x80,0x36,0x2f,0x10,0x90,0x2e,0x51,
0x00,0x40,0x55,0x82,0x20,0x80,0x2e,0x34,0x81,0x40,0x90,0x2e,0x42,0x81,0x70,0x90,
0x35,0x40,0x06,0x80,0x2e,0x2a,0x81,0x6a,0x90,0x2e,0x38,0x17,0x80,0x35,0x3b,0x81,
0x36,0x80,0x2e,0x19,0x20,0xd0,0x10,0x03,0x90,0x35,0x3b,0x30,0xd0,0x0e,0x32,0xd0,
0x00,0x81,0x0e,0x90,0x2e,0x48,0x00,0x41,0x56,0x33,0x80,0x40,0x26,0x14,0x80,0x35,
0x44,0x81,0x39,0x80,0x2e,0x34,0x8a,0x56,0x80,0x41,0x4f,0x89,0x6a,0xff,0x2f,0x00,
]).buffer;
